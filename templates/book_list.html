{% extends "base.html" %}

{% block content %}
    <div class="d-flex flex-row justify-content-evenly my-1">
        <h2 align="center">Список книг</h2>
        <form method="post" class="d-flex flex-row">
            <select name="type">
                <option value="title">Поиск по названию</option>
                <option value="author">Поиск по автору</option>
            </select>
            <input type="text" name="search_query"/>
            <button class="btn btn-primary" type="submit">Поиск</button>
        </form>
    </div>
    <div class="mb-1" style="text-align: center">
        <a class="btn btn-success" href="/books/add">Добавить книгу</a>
    </div>
    <div class="list-group">
        {% for book in books %}
            <div class="list-group-item d-flex flex-row justify-content-start">
                <div class="me-1"><img class="cover" src="{{'/' + book.data_folder + '/cover'}}" alt="обложка"/></div>
                <div>
                    <h5>{{book.title}}</h5>
                    <p><strong>Описание:</strong> {{book.description}}</p>
                    <p><strong>Автор:</strong> {{book.author.name}}</p>
                    <p><strong>Жанр:</strong> {{book.genre.name}}</p>
                    <p>Книга добавлена пользователем <strong>{{book.user.name}}</strong> {{book.date_added}}</p>
                    <p><strong>Количество загрузок:</strong> {{book.downloads_count}}</p>
                    <div class="d-flex flex-row justify-content-evenly" style="max-width: 50%">
                        <a class="btn btn-primary" href="/books/{{book.id}}/get/epub">Скачать EPUB</a>
                        <a class="btn btn-primary" href="/books/{{book.id}}/get/fb2">Скачать FB2</a>
                        <a class="btn btn-primary" href="/books/{{book.id}}/reviews">Отзывы пользователей</a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
